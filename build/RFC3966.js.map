{"version":3,"sources":["../source/RFC3966.js"],"names":["parseRFC3966","formatRFC3966","text","number","ext","split","part","name","value","Error"],"mappings":";;;;;;;;;;;;;;QAQgBA,Y,GAAAA,Y;QA0CAC,a,GAAAA,a;;AAlDhB;;;;AAEA;;AAEA;;;;AAIO,SAASD,YAAT,CAAsBE,IAAtB,EACP;AACC,KAAIC,eAAJ;AACA,KAAIC,YAAJ;;AAFD;AAAA;AAAA;;AAAA;AAIC,kDAAmBF,KAAKG,KAAL,CAAW,GAAX,CAAnB,4GACA;AAAA,OADWC,IACX;;AAAA,qBACuBA,KAAKD,KAAL,CAAW,GAAX,CADvB;AAAA;AAAA,OACQE,IADR;AAAA,OACcC,KADd;;AAEC,WAAQD,IAAR;AAEC,SAAK,KAAL;AACCJ,cAASK,KAAT;AACA;AACD,SAAK,KAAL;AACCJ,WAAMI,KAAN;AACA;AACD,SAAK,eAAL;AACC;AACA;AACA,SAAIA,MAAM,CAAN,MAAa,GAAjB,EAAsB;AACrBL,eAASK,QAAQL,MAAjB;AACA;AACD;AAdF;AAgBA;;AAED;AAzBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0BC,KAAI,CAAC,mCAAuBA,MAAvB,CAAL,EACA;AACC,SAAO,EAAP;AACA;;AAED,QAAO;AACNA,gBADM;AAENC;AAFM,EAAP;AAIA;;AAED;;;;AAIO,SAASH,aAAT,OACP;AAAA,KADgCE,MAChC,QADgCA,MAChC;AAAA,KADwCC,GACxC,QADwCA,GACxC;;AACC,KAAI,CAACD,MAAL,EACA;AACC,SAAO,EAAP;AACA;;AAED,KAAIA,OAAO,CAAP,MAAc,GAAlB,EACA;AACC,QAAM,IAAIM,KAAJ,6DAAN;AACA;;AAED,iBAAcN,MAAd,IAAuBC,MAAM,UAAUA,GAAhB,GAAsB,EAA7C;AACA","file":"RFC3966.js","sourcesContent":["import { is_viable_phone_number } from './parse'\n\n// https://www.ietf.org/rfc/rfc3966.txt\n\n/**\n * @param  {string} text - Phone URI (RFC 3966).\n * @return {object} `{ ?number, ?ext }`.\n */\nexport function parseRFC3966(text)\n{\n\tlet number\n\tlet ext\n\n\tfor (const part of text.split(';'))\n\t{\n\t\tconst [name, value] = part.split(':')\n\t\tswitch (name)\n\t\t{\n\t\t\tcase 'tel':\n\t\t\t\tnumber = value\n\t\t\t\tbreak\n\t\t\tcase 'ext':\n\t\t\t\text = value\n\t\t\t\tbreak\n\t\t\tcase 'phone-context':\n\t\t\t\t// Only \"country contexts\" are supported.\n\t\t\t\t// \"Domain contexts\" are ignored.\n\t\t\t\tif (value[0] === '+') {\n\t\t\t\t\tnumber = value + number\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t}\n\t}\n\n\t// If the phone number is not viable, then abort.\n\tif (!is_viable_phone_number(number))\n\t{\n\t\treturn {}\n\t}\n\n\treturn {\n\t\tnumber,\n\t\text\n\t}\n}\n\n/**\n * @param  {object} - `{ ?number, ?extension }`.\n * @return {string} Phone URI (RFC 3966).\n */\nexport function formatRFC3966({ number, ext })\n{\n\tif (!number)\n\t{\n\t\treturn ''\n\t}\n\n\tif (number[0] !== '+')\n\t{\n\t\tthrow new Error(`\"formatRFC3966()\" expects \"number\" to be in E.164 format.`)\n\t}\n\n\treturn `tel:${number}${ext ? ';ext=' + ext : ''}`\n}"]}